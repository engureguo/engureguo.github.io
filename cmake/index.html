<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>cmake tutorials note | Egu0</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="æ¬¢è¿æ‚¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¬å¼€çš„ä¸ªäººå†…å®¹ç½‘ç«™ï¼">
    
    <link rel="preload" href="/ops/assets/css/0.styles.35aed208.css" as="style"><link rel="preload" href="/ops/assets/js/app.d9b500de.js" as="script"><link rel="preload" href="/ops/assets/js/2.592a6313.js" as="script"><link rel="preload" href="/ops/assets/js/1.47e12c88.js" as="script"><link rel="preload" href="/ops/assets/js/24.848e5af5.js" as="script"><link rel="prefetch" href="/ops/assets/js/10.fde088a2.js"><link rel="prefetch" href="/ops/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/ops/assets/js/12.27d4f152.js"><link rel="prefetch" href="/ops/assets/js/13.419d7748.js"><link rel="prefetch" href="/ops/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/ops/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/ops/assets/js/16.85253907.js"><link rel="prefetch" href="/ops/assets/js/17.c2838453.js"><link rel="prefetch" href="/ops/assets/js/18.3256f17f.js"><link rel="prefetch" href="/ops/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/ops/assets/js/20.0d880388.js"><link rel="prefetch" href="/ops/assets/js/21.33b300c9.js"><link rel="prefetch" href="/ops/assets/js/22.f648a94c.js"><link rel="prefetch" href="/ops/assets/js/23.46909532.js"><link rel="prefetch" href="/ops/assets/js/25.47a9c99a.js"><link rel="prefetch" href="/ops/assets/js/26.ddfe8844.js"><link rel="prefetch" href="/ops/assets/js/27.cf01e403.js"><link rel="prefetch" href="/ops/assets/js/28.7876342e.js"><link rel="prefetch" href="/ops/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/ops/assets/js/4.0a92875f.js"><link rel="prefetch" href="/ops/assets/js/5.3b9be48d.js"><link rel="prefetch" href="/ops/assets/js/6.7b96ebf4.js"><link rel="prefetch" href="/ops/assets/js/7.7e58b9c4.js"><link rel="prefetch" href="/ops/assets/js/vendors~docsearch.2493936b.js">
    <link rel="stylesheet" href="/ops/assets/css/0.styles.35aed208.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ops/" class="home-link router-link-active"><img src="/ops/images/logo.png" alt="Egu0" class="logo"> <span class="site-name can-hide">Egu0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§ Linux" class="dropdown-title"><span class="title">ğŸ§ Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ§ Linux" class="mobile-dropdown-title"><span class="title">ğŸ§ Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ops/cmake/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CMake å…¥é—¨
</a></li><li class="dropdown-item"><!----> <a href="/ops/linux-gcc/" class="nav-link">
  GCC å…¥é—¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”§ å·¥å…·" class="dropdown-title"><span class="title">ğŸ”§ å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”§ å·¥å…·" class="mobile-dropdown-title"><span class="title">ğŸ”§ å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ops/tool-box/a-tool-box/" class="nav-link">
  æˆ‘çš„å·¥å…·ç›’
</a></li><li class="dropdown-item"><!----> <a href="/ops/tool-box/vuepress-using/" class="nav-link">
  Vuepress v1 å®è·µ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”— å¤–é“¾" class="dropdown-title"><span class="title">ğŸ”— å¤–é“¾</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”— å¤–é“¾" class="mobile-dropdown-title"><span class="title">ğŸ”— å¤–é“¾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/egu0" target="_self" class="nav-link external">
  Gitee
  <!----></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§ Linux" class="dropdown-title"><span class="title">ğŸ§ Linux</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ§ Linux" class="mobile-dropdown-title"><span class="title">ğŸ§ Linux</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ops/cmake/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  CMake å…¥é—¨
</a></li><li class="dropdown-item"><!----> <a href="/ops/linux-gcc/" class="nav-link">
  GCC å…¥é—¨
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”§ å·¥å…·" class="dropdown-title"><span class="title">ğŸ”§ å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”§ å·¥å…·" class="mobile-dropdown-title"><span class="title">ğŸ”§ å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ops/tool-box/a-tool-box/" class="nav-link">
  æˆ‘çš„å·¥å…·ç›’
</a></li><li class="dropdown-item"><!----> <a href="/ops/tool-box/vuepress-using/" class="nav-link">
  Vuepress v1 å®è·µ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ”— å¤–é“¾" class="dropdown-title"><span class="title">ğŸ”— å¤–é“¾</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ”— å¤–é“¾" class="mobile-dropdown-title"><span class="title">ğŸ”— å¤–é“¾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/egu0" target="_self" class="nav-link external">
  Gitee
  <!----></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>cmake tutorials note</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ops/cmake/#å¿«é€Ÿä¸Šæ‰‹" class="sidebar-link">å¿«é€Ÿä¸Šæ‰‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ops/cmake/#cmake-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨" class="sidebar-link">cmake å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#cmake-æ·»åŠ å˜é‡" class="sidebar-link">cmake - æ·»åŠ å˜é‡</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#cmake-æœç´¢æ–‡ä»¶" class="sidebar-link">cmake - æœç´¢æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•" class="sidebar-link">æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•</a></li></ul></li><li><a href="/ops/cmake/#åŸºäº-cmake-æ„å»ºåº“å’Œä½¿ç”¨åº“" class="sidebar-link">åŸºäº cmake æ„å»ºåº“å’Œä½¿ç”¨åº“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ops/cmake/#åˆ›å»ºåŠ¨æ€åº“" class="sidebar-link">åˆ›å»ºåŠ¨æ€åº“</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#åˆ›å»ºé™æ€åº“" class="sidebar-link">åˆ›å»ºé™æ€åº“</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#é“¾æ¥é™æ€åº“" class="sidebar-link">é“¾æ¥é™æ€åº“</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#é“¾æ¥åŠ¨æ€åº“" class="sidebar-link">é“¾æ¥åŠ¨æ€åº“</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#è¡¥å……-åº“çš„åŠ è½½å·¥ä½œ" class="sidebar-link">è¡¥å……ï¼šåº“çš„åŠ è½½å·¥ä½œ</a></li></ul></li><li><a href="/ops/cmake/#æ—¥å¿—" class="sidebar-link">æ—¥å¿—</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ops/cmake/#å˜é‡å’Œåˆ—è¡¨" class="sidebar-link">å˜é‡å’Œåˆ—è¡¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ops/cmake/#å­—ç¬¦ä¸²æ‹¼æ¥" class="sidebar-link">å­—ç¬¦ä¸²æ‹¼æ¥</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#list-æ“ä½œ" class="sidebar-link">List æ“ä½œ</a></li></ul></li><li><a href="/ops/cmake/#å®å®šä¹‰" class="sidebar-link">å®å®šä¹‰</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/ops/cmake/#cmake-åµŒå¥—" class="sidebar-link">CMake åµŒå¥—</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ops/cmake/#ç¼–å†™æ ¹-cmakelists-txt" class="sidebar-link">ç¼–å†™æ ¹ CMakeLists.txt</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#calc-å’Œ-sort-ä¸¤ä¸ªæ¨¡å—çš„-cmakelists-txt" class="sidebar-link">calc å’Œ sort ä¸¤ä¸ªæ¨¡å—çš„ CMakeLists.txt</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#ä¸¤ä¸ªæµ‹è¯•ç›®å½•é‡Œçš„-cmakelists-txt" class="sidebar-link">ä¸¤ä¸ªæµ‹è¯•ç›®å½•é‡Œçš„ CMakeLists.txt</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#æ‰§è¡Œæ„å»º" class="sidebar-link">æ‰§è¡Œæ„å»º</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#åœ¨-sort-åº“ä¸­é“¾æ¥-calc-åº“" class="sidebar-link">åœ¨ sort åº“ä¸­é“¾æ¥ calc åº“</a></li><li class="sidebar-sub-header"><a href="/ops/cmake/#åœ¨é™æ€åº“ä¸­é“¾æ¥åŠ¨æ€åº“" class="sidebar-link">åœ¨é™æ€åº“ä¸­é“¾æ¥åŠ¨æ€åº“</a></li></ul></li><li><a href="/ops/cmake/#é¡¹ç›®" class="sidebar-link">é¡¹ç›®</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cmake-tutorials-note"><a href="#cmake-tutorials-note" class="header-anchor">#</a> cmake tutorials note</h1> <p><a href="https://www.bilibili.com/video/BV14s4y1g7Zj" target="_blank" rel="noopener noreferrer">dabing cmake<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://subingwen.cn/cmake/CMake-primer/" target="_blank" rel="noopener noreferrer">doc-1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://subingwen.cn/cmake/CMake-advanced" target="_blank" rel="noopener noreferrer">doc-2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="header-anchor">#</a> å¿«é€Ÿä¸Šæ‰‹</h2> <p><strong>gcc æ­¥éª¤</strong>:</p> <ol><li>é¢„å¤„ç†</li> <li>ç¼–è¯‘ï¼ˆç¼–è¯‘å™¨ï¼‰</li> <li>æ±‡ç¼–ï¼ˆæ±‡ç¼–å™¨ï¼‰</li> <li>é“¾æ¥ï¼ˆé“¾æ¥å™¨ï¼‰</li></ol> <p>å¦‚æœæœ‰å¾ˆå¤šæ–‡ä»¶ï¼ˆæ¯”å¦‚è¶…è¿‡ 10 ä¸ªï¼‰éœ€è¦åœ¨ä¸€èµ·ç¼–è¯‘ï¼Œé‚£ä¹ˆä½¿ç”¨ gcc å‘½ä»¤ä¼¼ä¹å¾ˆæ£˜æ‰‹ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ makefile æˆ– cmake å·¥å…·è¾…åŠ©ç¼–è¯‘ã€‚</p> <p>æ­¥éª¤ï¼š</p> <ol><li>create file <code>CmakeLists.txt</code></li> <li>execute cmd <code>cmake &lt;path&gt;</code> to generate <code>Makefile</code>ï¼ˆ2nd path can be relative path of <code>CMakeLists.txt</code>ï¼‰</li> <li>use cmd <code>make</code> to obtain executable file</li></ol> <h3 id="cmake-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨"><a href="#cmake-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨" class="header-anchor">#</a> cmake å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> cmake

cmake <span class="token parameter variable">--version</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># centos</span>
<span class="token comment"># https://stackoverflow.com/questions/55345373/how-to-install-gcc-g-8-on-centos#comment136335547_66016318</span>
<span class="token function">sudo</span> dnf groupinstall <span class="token string">&quot;Development Tools&quot;</span>
</code></pre></div><p>create file <code>CMakeLists.txt</code> and fill with:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># å®šä¹‰æœ€å°çš„ cmake ç‰ˆæœ¬ï¼Œå¯é€‰</span>
cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>

<span class="token comment"># å®šä¹‰é¡¹ç›®å</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token comment"># æŒ‡å®šæœ€ç»ˆå¯æ‰§è¡Œæ–‡ä»¶ä»¥åŠæºæ–‡ä»¶</span>
<span class="token comment"># å‚æ•°1ï¼šå¯æ‰§è¡Œæ–‡ä»¶åå­</span>
<span class="token comment"># å‚æ•°2ï¼šåŸæ–‡ä»¶åˆ—è¡¨ï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä½¿ç”¨ space æˆ– ; é—´éš”</span>
add_executable<span class="token punctuation">(</span>app main<span class="token punctuation">.</span>cpp add<span class="token punctuation">.</span>cpp sub<span class="token punctuation">.</span>cpp mul<span class="token punctuation">.</span>cpp div<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># æ³¨æ„ï¼šæŒ‡å®šæºæ–‡ä»¶æ—¶æ— éœ€æŒ‡å®š .h æ–‡ä»¶</span>
</code></pre></div><p>åˆ©ç”¨ cmake è¿›è¡Œç¼–è¯‘</p> <div class="language-txt extra-class"><pre class="language-txt"><code>$ cmake .
.
â”œâ”€â”€ add.cpp
â”œâ”€â”€ CMakeCache.txt
â”œâ”€â”€ CMakeFiles
â”œâ”€â”€ cmake_install.cmake
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ div.cpp
â”œâ”€â”€ head.h
â”œâ”€â”€ main.cpp
â”œâ”€â”€ Makefile
â”œâ”€â”€ mul.cpp
â””â”€â”€ sub.cpp
</code></pre></div><hr> <p><strong>æ¨è</strong>å¦ä¸€ç§æ–¹å¼ï¼šå°†æ‰€æœ‰ cmake å’Œ make ä¸­é—´äº§ç‰©ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹</p> <blockquote><p>å°è¯•è¿™ç§æ–¹å¼ä¹‹é—´éœ€è¦åˆ æ‰ä¸Šè¾¹ä¸€æ­¥äº§ç”Ÿçš„æ‰€æœ‰ä¸­é—´äº§ç‰©</p> <p><code>rm -rf CMakeFiles cmake_install.cmake CMakeCache.txt Makefile</code></p></blockquote> <ol><li>åˆ›å»º <code>build</code> ç›®å½•å¹¶ <code>cd</code> è¿›å…¥å®ƒ</li> <li>æ‰§è¡Œå‘½ä»¤ <code>cmake ..</code></li> <li>ç„¶åæ‰€æœ‰çš„ç¼–è¯‘ä¸­é—´äº§ç‰©éƒ½å‡ºç°åœ¨äº† build ç›®å½•ä¸­</li></ol> <div class="language-txt extra-class"><pre class="language-txt"><code>.
â”œâ”€â”€ add.cpp
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ div.cpp
â”œâ”€â”€ head.h
â”œâ”€â”€ main.cpp
â”œâ”€â”€ mul.cpp
â””â”€â”€ sub.cpp
</code></pre></div><ol start="4"><li>ç„¶åæ‰§è¡Œ <code>make</code> å‘½ä»¤ï¼Œç„¶åå¯ä»¥å¾—åˆ° <code>app</code> å¯æ‰§è¡Œæ–‡ä»¶</li></ol> <h3 id="cmake-æ·»åŠ å˜é‡"><a href="#cmake-æ·»åŠ å˜é‡" class="header-anchor">#</a> cmake - æ·»åŠ å˜é‡</h3> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token comment"># 1.æŒ‡å®šæ ‡å‡†ç‰ˆæœ¬(auto keyword is supported in std11+)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token comment"># 2. å®šä¹‰å˜é‡</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>SRC_LIST main<span class="token punctuation">.</span>cpp add<span class="token punctuation">.</span>cpp sub<span class="token punctuation">.</span>cpp mul<span class="token punctuation">.</span>cpp div<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># same as</span>
<span class="token comment"># set(SRC_LIST main.cpp;add.cpp;sub.cpp;mul.cpp;div.cpp)</span>
add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼šé€šè¿‡ä¸º cmake å‘½ä»¤æ·»åŠ å‚æ•°æ·»åŠ </p> <div class="language-sh extra-class"><pre class="language-sh"><code>cmake <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token parameter variable">-DCMAKE_CXX_STANDARD</span><span class="token operator">=</span><span class="token number">11</span>
</code></pre></div><hr> <p>å¦ä¸€ä¸ªå® <code>EXECUTABLE_OUTPUT_PATH</code> ç”¨æ¥æŒ‡å®šç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ã€‚å¦‚æœè·¯å¾„ä¸å­˜åœ¨ä¼šè‡ªåŠ¨è¢«åˆ›å»º</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

SET<span class="token punctuation">(</span>HOME <span class="token operator">/</span>home<span class="token operator">/</span>eugene<span class="token operator">/</span>tools<span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{</span>HOME<span class="token punctuation">}</span><span class="token operator">/</span><span class="token builtin">bin</span><span class="token punctuation">)</span>
</code></pre></div><hr> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token comment"># å®šä¹‰æ ‡å‡†åº“ç‰ˆæœ¬</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>SRC_LIST main<span class="token punctuation">.</span>cpp add<span class="token punctuation">.</span>cpp sub<span class="token punctuation">.</span>cpp mul<span class="token punctuation">.</span>cpp div<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># set(SRC_LIST main.cpp;add.cpp;sub.cpp;mul.cpp;div.cpp)</span>
add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>HOME <span class="token operator">/</span>home<span class="token operator">/</span>eugene<span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{</span>HOME<span class="token punctuation">}</span><span class="token operator">/</span>aa<span class="token operator">/</span>bb<span class="token operator">/</span>app<span class="token punctuation">)</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>âœ  build cmake .. &amp;&amp; make
-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /home/eugene/Documents/cmake_workspace/01proj_helloworld/build
[ 16%] Building CXX object CMakeFiles/app.dir/main.cpp.o
[ 33%] Building CXX object CMakeFiles/app.dir/add.cpp.o
[ 50%] Building CXX object CMakeFiles/app.dir/sub.cpp.o
[ 66%] Building CXX object CMakeFiles/app.dir/mul.cpp.o
[ 83%] Building CXX object CMakeFiles/app.dir/div.cpp.o
[100%] Linking CXX executable /home/eugene/aa/bb/app/app
[100%] Built target app
âœ  build cmake .. &amp;&amp; make
-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /home/eugene/Documents/cmake_workspace/01proj_helloworld/build
[ 16%] Building CXX object CMakeFiles/app.dir/main.cpp.o
[ 33%] Building CXX object CMakeFiles/app.dir/add.cpp.o
[ 50%] Building CXX object CMakeFiles/app.dir/sub.cpp.o
[ 66%] Building CXX object CMakeFiles/app.dir/mul.cpp.o
[ 83%] Building CXX object CMakeFiles/app.dir/div.cpp.o
[100%] Linking CXX executable /home/eugene/aa/bb/app/app
[100%] Built target app
âœ  build /home/eugene/aa/bb/app/app
a = 20, b = 12
a + b = 32
a - b = 8
a * b = 240
a / b = 1.666667
âœ  build
âœ  build
</code></pre></div><p>åŠ¨æ‰‹å°è¯•ï¼šchange CMAKE_CXX_STANDARD value from 11 to 98, and see what'll happen.</p> <h3 id="cmake-æœç´¢æ–‡ä»¶"><a href="#cmake-æœç´¢æ–‡ä»¶" class="header-anchor">#</a> cmake - æœç´¢æ–‡ä»¶</h3> <p>ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä½¿ç”¨ set å‘½ä»¤æŒ‡å®šäº†æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œä½†å½“æ–‡ä»¶å¾ˆå¤šæ—¶è¿™ç§æ–¹æ³•å¤ªç¹çï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœç´¢å‘½ä»¤è‡ªåŠ¨æ‰«ææŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶</p> <p>æ–¹å¼ä¸€ï¼š<code>aux_source_directory</code> å‘½ä»¤</p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token comment"># set(SRC_LIST main.cpp add.cpp sub.cpp mul.cpp div.cpp)</span>

<span class="token comment"># æœç´¢æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¹¶å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</span>
aux_source_directory<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span> SRC_LIST<span class="token punctuation">)</span>

<span class="token comment"># ä½¿ç”¨å˜é‡</span>
add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p><code>PROJECT_SOURCE_DIR</code> è¿™ä¸ªå˜é‡æ‰€æŒ‡çš„ç›®å½•æ˜¯æˆ‘ä»¬ä½¿ç”¨ cmake å‘½ä»¤æ—¶ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ‰€æŒ‡çš„ç›®å½•</p></blockquote> <p>æ–¹å¼äºŒï¼š<code>file</code> å‘½ä»¤ï¼ŒåŠŸèƒ½æ¯”è¾ƒå¼ºå¤§</p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token comment"># set(SRC_LIST main.cpp add.cpp sub.cpp mul.cpp div.cpp)</span>

<span class="token comment"># æ ¹æ® ${PROJECT_SOURCE_DIR}/*.cpp è§„åˆ™æœç´¢æ‰€æœ‰æ–‡ä»¶(æ— é€’å½’)å¹¶å°†ä»–ä»¬ä¿å­˜åœ¨å˜é‡ SRC_LIST ä¸­</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://cmake.org/cmake/help/latest/command/file.html" target="_blank" rel="noopener noreferrer">file â€” CMake 3.29.0-rc1 Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•"><a href="#æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•" class="header-anchor">#</a> æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•</h3> <p>åˆ›å»ºä¸¤ä¸ªç›®å½•ï¼š<code>include</code> ç”¨æ¥å­˜æ”¾æ‰€æœ‰å¤´æ–‡ä»¶ï¼›<code>src</code> ç”¨æ¥å­˜æ”¾æ‰€æœ‰æºæ–‡ä»¶</p> <p>ç»“æ„ä¸º</p> <div class="language-txt extra-class"><pre class="language-txt"><code>âœ  01proj_helloworld tree -L 2
.
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ app
â”‚   â”œâ”€â”€ CMakeCache.txt
â”‚   â”œâ”€â”€ CMakeFiles
â”‚   â”œâ”€â”€ cmake_install.cmake
â”‚   â””â”€â”€ Makefile
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ include
â”‚   â””â”€â”€ head.h
â””â”€â”€ src
    â”œâ”€â”€ add.cpp
    â”œâ”€â”€ div.cpp
    â”œâ”€â”€ main.cpp
    â”œâ”€â”€ mul.cpp
    â””â”€â”€ sub.cpp
</code></pre></div><p>ç¼–å†™ <code>CMakeLists.txt</code></p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token comment"># file(GLOB SRC_LIST ${PROJECT_SOURCE_DIR}/*.cpp)</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ build ç›®å½•ä¸­è¿›è¡Œç¼–è¯‘ï¼Œå‘ç°å‡ºé”™äº†</p> <div class="language-txt extra-class"><pre class="language-txt"><code>âœ  build cmake .. &amp;&amp; make
-- The C compiler identification is GNU 11.4.0
-- The CXX compiler identification is GNU 11.4.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /home/eugene/Documents/cmake_workspace/01proj_helloworld/build
[ 16%] Building CXX object CMakeFiles/app.dir/src/add.cpp.o
/home/eugene/Documents/cmake_workspace/01proj_helloworld/src/add.cpp:2:10: fatal error: head.h: No such file or directory
    2 | #include &quot;head.h&quot;
      |          ^~~~~~~~
compilation terminated.
make[2]: *** [CMakeFiles/app.dir/build.make:76: CMakeFiles/app.dir/src/add.cpp.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:83: CMakeFiles/app.dir/all] Error 2
make: *** [Makefile:91: all] Error 2
âœ  build
</code></pre></div><p>åŸå› ï¼š<code>add.cpp</code> æ‰¾ä¸åˆ°å¤´æ–‡ä»¶</p> <p>è§£å†³æ–¹æ³•</p> <ol><li>ä¿®æ”¹ <code>add.cpp</code> çš„ <code>#include &quot;head.h&quot;</code>ä¸º <code>#include &quot;../include/head.h&quot;</code>: å¦‚æœæ–‡ä»¶å¤ªå¤šï¼Œé‚£ä¹ˆä¿®æ”¹èµ·æ¥å¾ˆéº»çƒ¦</li> <li>ï¼ˆæ¨èï¼‰ æŒ‡å®š header ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤ï¼š <code>include_directories(${PROJECT_SOURCE_DIR}/include)</code></li></ol> <p>æœ€ç»ˆçš„ <code>CMakeLists.txt</code></p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

<span class="token comment"># æŒ‡å®šå¤´æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>

add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="åŸºäº-cmake-æ„å»ºåº“å’Œä½¿ç”¨åº“"><a href="#åŸºäº-cmake-æ„å»ºåº“å’Œä½¿ç”¨åº“" class="header-anchor">#</a> åŸºäº cmake æ„å»ºåº“å’Œä½¿ç”¨åº“</h2> <p>é¡¹ç›®ï¼š<code>02project_lib</code></p> <p>åˆ›å»ºé¡¹ç›®æœ‰å“ªäº›ç›®çš„ï¼Ÿ</p> <ol><li>æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶</li> <li>ç»„åˆæºæ–‡ä»¶åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿç§°ä¸ºåº“ï¼Œæœ‰åŠ¨æ€åº“å’Œé™æ€åº“ä¹‹åˆ†</li></ol> <h3 id="åˆ›å»ºåŠ¨æ€åº“"><a href="#åˆ›å»ºåŠ¨æ€åº“" class="header-anchor">#</a> åˆ›å»ºåŠ¨æ€åº“</h3> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>mylib<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>

<span class="token comment"># add_executable(app ${SRC_LIST})</span>

<span class="token comment"># ä½¿ç”¨ add_library å‘½ä»¤</span>
add_library<span class="token punctuation">(</span>mycalc SHARED $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>$ tree -L 2
.
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ CMakeCache.txt
â”‚   â”œâ”€â”€ CMakeFiles
â”‚   â”œâ”€â”€ cmake_install.cmake
â”‚   â”œâ”€â”€ libmycalc.so          # åŠ¨æ€åº“
â”‚   â””â”€â”€ Makefile
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ include
â”‚   â””â”€â”€ head.h
â””â”€â”€ src
    â”œâ”€â”€ add.cpp
    â”œâ”€â”€ div.cpp
    â”œâ”€â”€ mul.cpp
    â””â”€â”€ sub.cpp
</code></pre></div><blockquote><p>dynamic library have executable permission while static library do not have!</p></blockquote> <h3 id="åˆ›å»ºé™æ€åº“"><a href="#åˆ›å»ºé™æ€åº“" class="header-anchor">#</a> åˆ›å»ºé™æ€åº“</h3> <p>åˆ©ç”¨ä¸Šä¸€èŠ‚ä»£ç ï¼Œåªéœ€æ”¹åŠ¨ä¸€ä¸ªå…³é”®å­—</p> <p><code>CMakeLists.txt</code>:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#add_library(mycalc SHARED ${SRC_LIST})</span>
add_library<span class="token punctuation">(</span>mycalc STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>.
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ CMakeCache.txt
â”‚   â”œâ”€â”€ CMakeFiles
â”‚   â”œâ”€â”€ cmake_install.cmake
â”‚   â”œâ”€â”€ libmycalc.a         # é™æ€åº“
â”‚   â””â”€â”€ Makefile
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ include
â”‚   â””â”€â”€ head.h
â””â”€â”€ src
    â”œâ”€â”€ add.cpp
    â”œâ”€â”€ div.cpp
    â”œâ”€â”€ mul.cpp
    â””â”€â”€ sub.cpp
</code></pre></div><hr> <p>å¯ä»¥ä½¿ç”¨å® <code>LIBRARY_OUTPUT_PATH</code> æŒ‡å®šåŠ¨æ€åº“æˆ–é™æ€åº“çš„è¾“å‡ºç›®å½•</p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>mylib<span class="token punctuation">)</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>

<span class="token comment"># set library output path</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token punctuation">)</span>

add_library<span class="token punctuation">(</span>mycalc STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="é“¾æ¥é™æ€åº“"><a href="#é“¾æ¥é™æ€åº“" class="header-anchor">#</a> é“¾æ¥é™æ€åº“</h3> <p>å‡†å¤‡ç›®å½•ï¼ˆé¡¹ç›®ï¼š <code>03proj_use_static_lib</code>ï¼‰</p> <div class="language-txt extra-class"><pre class="language-txt"><code>.
â”œâ”€â”€ build
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ include
â”‚   â””â”€â”€ head.h
â”œâ”€â”€ lib
â”‚   â””â”€â”€ libmycalc.a
â””â”€â”€ src
    â””â”€â”€ main.cpp
</code></pre></div><p>é“¾æ¥é™æ€åº“</p> <div class="language-python extra-class"><pre class="language-python"><code>project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>


<span class="token comment"># way 1</span>
<span class="token comment"># link_libraries(${PROJECT_SOURCE_DIR}/lib/libmycalc.a) # specify a staic lib path</span>
<span class="token comment"># way 2</span>
<span class="token comment"># link_libraries(libmycalc.a)</span>
<span class="token comment"># link_directories(${PROJECT_SOURCE_DIR}/lib) # specify lib directories</span>
<span class="token comment"># way 3</span>
<span class="token comment"># link_libraries(mycalc)</span>
<span class="token comment"># link_directories(${PROJECT_SOURCE_DIR}/lib) # specify lib directories</span>
<span class="token comment"># way 4</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB LIB_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># support multiple staic lib paths</span>

add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„</p> <ul><li><code>link_libraries()</code> and <code>link_directories()</code> å‘½ä»¤æ”¯æŒå¤šä¸ªå‚æ•°</li> <li><code>link_libraries()</code> åªèƒ½é“¾æ¥é™æ€åº“</li> <li><code>link_directories()</code> æŒ‡å®šè¦é“¾æ¥åº“æ‰€åœ¨çš„ç›®å½•</li></ul> <h3 id="é“¾æ¥åŠ¨æ€åº“"><a href="#é“¾æ¥åŠ¨æ€åº“" class="header-anchor">#</a> é“¾æ¥åŠ¨æ€åº“</h3> <p>é™¤äº†åœ¨é¡¹ç›®ä¸­å¼•å…¥é™æ€åº“ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿä¼šä½¿ç”¨ä¸€äº›æ ‡å‡†çš„æˆ–è€…ç¬¬ä¸‰æ–¹æä¾›çš„ä¸€äº›åŠ¨æ€åº“ï¼Œå…³äº<strong>åŠ¨æ€åº“çš„åˆ¶ä½œã€ä½¿ç”¨ä»¥åŠåœ¨å†…å­˜ä¸­çš„åŠ è½½æ–¹å¼</strong>å’Œé™æ€åº“éƒ½æ˜¯ä¸åŒçš„ã€‚</p> <p>åœ¨ cmake ä¸­é“¾æ¥åŠ¨æ€åº“éœ€è¦ç”¨åˆ° <a href="https://cmake.org/cmake/help/latest/command/target_link_libraries.html" target="_blank" rel="noopener noreferrer">target_link_libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å‘½ä»¤</p> <div class="language-txt extra-class"><pre class="language-txt"><code>target_link_libraries(&lt;target&gt;
                      &lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...
                     [&lt;PRIVATE|PUBLIC|INTERFACE&gt; &lt;item&gt;...]...)
</code></pre></div><ul><li><code>target</code> è¡¨ç¤ºè¦é“¾æ¥åˆ°å“ªé‡Œï¼Œå³ç›®æ ‡ã€‚å¯ä»¥æ˜¯å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…ä¸€ä¸ªåº“</li> <li>åç»­çš„å‚æ•°æ ¼å¼ä¸º <code>ä¿®é¥°ç¬¦ åŠ¨æ€åº“</code>ï¼Œä¸åŒçš„ä¿®é¥°ç¬¦è¡¨ç¤ºä¸åŒçš„æƒé™
<ul><li>å¦‚æœé“¾æ¥çš„åŠ¨æ€åº“ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œåˆ™æ— éœ€åšä»»ä½•è®¾ç½®ï¼Œ<strong>ä¸€èˆ¬æ— éœ€æŒ‡å®š</strong>ï¼Œä½¿ç”¨<strong>é»˜è®¤çš„ PUBLIC</strong> å³å¯</li> <li>åŠ¨æ€åº“çš„é“¾æ¥å…·æœ‰<code>ä¼ é€’æ€§</code>ï¼Œä¾‹å¦‚åŠ¨æ€åº“ A é“¾æ¥äº†åŠ¨æ€åº“ B å’ŒåŠ¨æ€åº“ Cï¼ˆå¯è¡¨ç¤ºä¸º <code>target_link_libraries(a, b, c)</code>ï¼‰ï¼ŒåŠ¨æ€åº“ D é“¾æ¥äº†åŠ¨æ€åº“ Aï¼Œé‚£ä¹ˆæ­¤æ—¶åŠ¨æ€åº“ D ç›¸å½“äºä¹Ÿé“¾æ¥äº†åŠ¨æ€åº“ Bã€Cï¼Œå¹¶å¯ä»¥ä½¿ç”¨ B å’Œ C ä¸­å®šä¹‰çš„æ–¹æ³•</li> <li>æƒé™ <code>PUBLIC</code>ï¼šç”¨ public ä¿®é¥°çš„åº“ä¼šè¢«é“¾æ¥åˆ° target ä¸­ï¼Œå¹¶ä¸”å…¶ä¸­çš„ç¬¦å·ä¹Ÿä¼šè¢«å¯¼å‡ºæä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨</li> <li>æƒé™ <code>PRIVATE</code>ï¼šç”¨ private ä¿®é¥°çš„åº“ä»…è¢«é“¾æ¥åˆ° target ä¸­ï¼Œå¹¶ä¸”ç»ˆç»“æ‰ï¼Œç¬¬ä¸‰æ–¹æ— æ³•æ„ŸçŸ¥è°ƒç”¨äº†ä»€ä¹ˆåº“</li> <li>æƒé™ <code>INTERFACE</code>ï¼šç”¨ interface ä¿®é¥°çš„åº“ä¸ä¼šè¢«è¿æ¥åˆ°å‰é¢çš„ taget ä¸­ï¼Œåªä¼šå¯¼å‡ºç¬¦å·</li></ul></li> <li><code>target_link_libraries</code> å³å¯ç”¨æ¥é“¾æ¥é™æ€åº“ï¼Œä¹Ÿå¯ç”¨æ¥é“¾æ¥åŠ¨æ€åº“</li></ul> <p>ä¾‹å­ï¼šé“¾æ¥ä¹‹å‰åˆ›å»ºçš„åŠ¨æ€åº“ <code>mycalc</code></p> <div class="language-python extra-class"><pre class="language-python"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>CMAKE_CXX_STANDARD <span class="token number">11</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥åŠ¨æ€åº“æ‰€åœ¨ç›®å½•ï¼ˆéœ€è¦æ”¾åœ¨add_executableå‘½ä»¤å‰ï¼‰</span>
link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token punctuation">)</span>

add_executable<span class="token punctuation">(</span>app $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥åŠ¨æ€åº“åˆ°å¯æ‰§è¡Œæ–‡ä»¶</span>
target_link_libraries<span class="token punctuation">(</span>app mycalc<span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼š<code>target_link_libraries()</code> è¯­å¥å¿…é¡»æ”¾åœ¨<strong>æœ€åä¸€è¡Œ</strong></p> <h3 id="è¡¥å……-åº“çš„åŠ è½½å·¥ä½œ"><a href="#è¡¥å……-åº“çš„åŠ è½½å·¥ä½œ" class="header-anchor">#</a> è¡¥å……ï¼šåº“çš„åŠ è½½å·¥ä½œ</h3> <blockquote><p>å¼•ç”¨ <a href="https://subingwen.cn/linux/library/#1-1-%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93" target="_blank" rel="noopener noreferrer">Linux é™æ€åº“å’ŒåŠ¨æ€åº“ | çˆ±ç¼–ç¨‹çš„å¤§ä¸™ (subingwen.cn)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>é™æ€åº“å¦‚ä½•è¢«åŠ è½½</strong></p> <p>åœ¨ç¨‹åºç¼–è¯‘çš„æœ€åä¸€ä¸ªé˜¶æ®µä¹Ÿå°±æ˜¯é“¾æ¥é˜¶æ®µï¼Œæä¾›çš„<strong>é™æ€åº“ä¼šè¢«æ‰“åŒ…åˆ°å¯æ‰§è¡Œç¨‹åºä¸­</strong>ã€‚å½“å¯æ‰§è¡Œç¨‹åºè¢«æ‰§è¡Œï¼Œé™æ€åº“ä¸­çš„ä»£ç ä¹Ÿä¼šä¸€å¹¶è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå› æ­¤ä¸ä¼šå‡ºç°é™æ€åº“æ‰¾ä¸åˆ°æ— æ³•è¢«åŠ è½½çš„é—®é¢˜ã€‚</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>é™æ€åº“è¢«æ‰“åŒ…åˆ°åº”ç”¨ç¨‹åºä¸­åŠ è½½é€Ÿåº¦å¿«</li> <li>å‘å¸ƒç¨‹åºæ— éœ€æä¾›é™æ€åº“ï¼Œç§»æ¤æ–¹ä¾¿</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>ç›¸åŒçš„åº“æ–‡ä»¶æ•°æ®å¯èƒ½åœ¨å†…å­˜ä¸­è¢«åŠ è½½å¤šä»½, æ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œæµªè´¹å†…å­˜</li> <li>åº“æ–‡ä»¶æ›´æ–°éœ€è¦é‡æ–°ç¼–è¯‘é¡¹ç›®æ–‡ä»¶, ç”Ÿæˆæ–°çš„å¯æ‰§è¡Œç¨‹åº, æµªè´¹æ—¶é—´ã€‚</li></ul> <hr> <p><strong>åŠ¨æ€åº“å¦‚ä½•è¢«åŠ è½½</strong></p> <p>åœ¨ç¨‹åºç¼–è¯‘çš„æœ€åä¸€ä¸ªé˜¶æ®µä¹Ÿå°±æ˜¯<strong>é“¾æ¥é˜¶æ®µ</strong>ï¼š</p> <ul><li>åœ¨ gcc å‘½ä»¤ä¸­è™½ç„¶æŒ‡å®šäº†åº“è·¯å¾„ï¼ˆä½¿ç”¨å‚æ•° -Lï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªè·¯å¾„å¹¶æ²¡æœ‰è®°å½•åˆ°å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œ<strong>åªæ˜¯æ£€æŸ¥</strong>äº†è¿™ä¸ªè·¯å¾„ä¸‹çš„åº“æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li> <li>åŒæ ·å¯¹åº”çš„åŠ¨æ€åº“æ–‡ä»¶ä¹Ÿ<strong>æ²¡æœ‰è¢«æ‰“åŒ…</strong>åˆ°å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œ<strong>åªæ˜¯åœ¨å¯æ‰§è¡Œç¨‹åºä¸­è®°å½•äº†åº“çš„åå­—</strong>ã€‚</li></ul> <p>å¯æ‰§è¡Œç¨‹åºè¢«æ‰§è¡Œèµ·æ¥ä¹‹å:</p> <ul><li>ç¨‹åºæ‰§è¡Œçš„æ—¶å€™ä¼šå…ˆæ£€æµ‹éœ€è¦çš„åŠ¨æ€åº“æ˜¯å¦å¯ä»¥è¢«åŠ è½½ï¼ŒåŠ è½½ä¸åˆ°å°±ä¼šæç¤ºä¸Šè¾¹çš„é”™è¯¯ä¿¡æ¯</li> <li>å½“åŠ¨æ€åº“ä¸­çš„å‡½æ•°åœ¨ç¨‹åºä¸­<strong>è¢«è°ƒç”¨äº†,</strong> è¿™ä¸ªæ—¶å€™åŠ¨æ€åº“<strong>æ‰åŠ è½½åˆ°å†…å­˜</strong>ï¼Œå¦‚æœä¸è¢«è°ƒç”¨å°±ä¸åŠ è½½</li> <li>åŠ¨æ€åº“çš„æ£€æµ‹å’Œå†…å­˜åŠ è½½æ“ä½œéƒ½æ˜¯ç”±åŠ¨æ€è¿æ¥å™¨æ¥å®Œæˆçš„</li></ul> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å¯å®ç°ä¸åŒè¿›ç¨‹é—´çš„èµ„æº<strong>å…±äº«</strong></li> <li>åŠ¨æ€åº“å‡çº§ç®€å•, åªéœ€è¦æ›¿æ¢åº“æ–‡ä»¶, æ— éœ€é‡æ–°ç¼–è¯‘åº”ç”¨ç¨‹åº</li> <li>ç¨‹åºçŒ¿å¯ä»¥æ§åˆ¶ä½•æ—¶åŠ è½½åŠ¨æ€åº“, ä¸è°ƒç”¨åº“å‡½æ•°åŠ¨æ€åº“ä¸ä¼šè¢«åŠ è½½</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li><p>åŠ è½½é€Ÿåº¦æ¯”é™æ€åº“æ…¢, ä»¥ç°åœ¨è®¡ç®—æœºçš„æ€§èƒ½å¯ä»¥å¿½ç•¥</p></li> <li><p>å‘å¸ƒç¨‹åºéœ€è¦æä¾›ä¾èµ–çš„åŠ¨æ€åº“</p></li></ul> <h2 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="header-anchor">#</a> æ—¥å¿—</h2> <p>å¯ä»¥åˆ©ç”¨ <a href="https://cmake.org/cmake/help/latest/command/message.html" target="_blank" rel="noopener noreferrer">message<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å‘½ä»¤è®°å½•æ—¥å¿—</p> <div class="language-python extra-class"><pre class="language-python"><code>message<span class="token punctuation">(</span><span class="token punctuation">[</span>STATUS<span class="token operator">|</span>WARNING<span class="token operator">|</span>AUTHOR_WARNING<span class="token operator">|</span>SEND_ERROR<span class="token operator">|</span>FATAL_ERROR<span class="token punctuation">]</span> <span class="token string">&quot;message here...&quot;</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ä¸æ·»åŠ æ¨¡å¼ï¼šè¡¨ç¤ºé‡è¦ä¿¡æ¯</li> <li><code>STATUS</code>ï¼šè¡¨ç¤ºéé‡è¦ä¿¡æ¯</li> <li><code>WARNING</code>ï¼šè­¦å‘Šï¼Œä¼šç»§ç»­æ‰§è¡Œ</li> <li><code>AUTHOR_WARNING</code>ï¼šè­¦å‘Šï¼ˆdevï¼‰ï¼Œä¼šç»§ç»­æ‰§è¡Œ</li> <li><code>SEND_ERROR</code>ï¼šé”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œï¼Œè·³è¿‡ç”Ÿæˆ</li> <li><code>FATAL_ERROR</code>ï¼šè‡´å‘½é”™è¯¯ï¼Œç»ˆæ­¢è¿è¡Œå’Œç”Ÿæˆ</li></ul> <p>ä¾‹å­</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>src<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>

<span class="token comment"># -- source files:/home/.../04proj_use_dynamic_lib/src/main.cpp</span>
message<span class="token punctuation">(</span>STATUS <span class="token string">&quot;source files:&quot;</span> $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å˜é‡å’Œåˆ—è¡¨"><a href="#å˜é‡å’Œåˆ—è¡¨" class="header-anchor">#</a> å˜é‡å’Œåˆ—è¡¨</h2> <h3 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="header-anchor">#</a> å­—ç¬¦ä¸²æ‹¼æ¥</h3> <p>ä½¿ç”¨ set å‘½ä»¤è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">set</span><span class="token punctuation">(</span>STR1 <span class="token string">&quot;NeuralNetwork&quot;</span><span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>STR2 <span class="token string">&quot;Hareware&quot;</span><span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>STR3 <span class="token string">&quot;I love &quot;</span> $<span class="token punctuation">{</span>STR1<span class="token punctuation">}</span> <span class="token string">&quot; and &quot;</span> $<span class="token punctuation">{</span>STR2<span class="token punctuation">}</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span>STATUS $<span class="token punctuation">{</span>STR3<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># -- I love NeuralNetwork and Hareware</span>

<span class="token builtin">set</span><span class="token punctuation">(</span>STR4 <span class="token string">&quot;I love ${STR1} and ${STR2}&quot;</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span>STATUS $<span class="token punctuation">{</span>STR4<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># -- I love NeuralNetwork and Hareware</span>
</code></pre></div><h3 id="list-æ“ä½œ"><a href="#list-æ“ä½œ" class="header-anchor">#</a> List æ“ä½œ</h3> <p><a href="https://cmake.org/cmake/help/latest/command/list.html" target="_blank" rel="noopener noreferrer">list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>åŸºæœ¬æ“ä½œï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>list([APPEND|LENGTH|GET|REMOVE_ITEM] æ“ä½œçš„å˜é‡ å‚æ•° [ç»“æœå˜é‡])
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># åˆ›å»º list</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>A_LIST apple banana grape<span class="token punctuation">)</span>
message<span class="token punctuation">(</span>$<span class="token punctuation">{</span>A_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># applebananagrape</span>

<span class="token comment"># å‘ list ä¸­è¿½åŠ å…ƒç´ </span>
<span class="token builtin">list</span><span class="token punctuation">(</span>APPEND A_LIST <span class="token string">&quot;cake&quot;</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span>$<span class="token punctuation">{</span>A_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># applebananagrapecake</span>

<span class="token comment"># è·å–é•¿åº¦</span>
<span class="token builtin">list</span><span class="token punctuation">(</span>LENGTH A_LIST LIST_LEN<span class="token punctuation">)</span>
message<span class="token punctuation">(</span><span class="token string">&quot;len: ${LIST_LEN}&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 4</span>

<span class="token comment"># è·å– A_LIST[0]</span>
<span class="token builtin">list</span><span class="token punctuation">(</span>GET A_LIST <span class="token number">0</span> LIST_STR<span class="token punctuation">)</span>
message<span class="token punctuation">(</span><span class="token string">&quot;A_LIST[0]: ${LIST_STR}&quot;</span><span class="token punctuation">)</span> <span class="token comment"># apple</span>
<span class="token comment"># A_LIST[3]</span>
<span class="token builtin">list</span><span class="token punctuation">(</span>GET A_LIST <span class="token number">3</span> LIST_STR<span class="token punctuation">)</span>
message<span class="token punctuation">(</span><span class="token string">&quot;A_LIST[3]: ${LIST_STR}&quot;</span><span class="token punctuation">)</span> <span class="token comment"># cake</span>

<span class="token comment"># ç§»é™¤å…ƒç´ </span>
<span class="token builtin">list</span><span class="token punctuation">(</span>REMOVE_ITEM A_LIST grape<span class="token punctuation">)</span>
<span class="token comment"># A_LIST[2]</span>
<span class="token builtin">list</span><span class="token punctuation">(</span>GET A_LIST <span class="token number">2</span> LIST_STR<span class="token punctuation">)</span>
message<span class="token punctuation">(</span><span class="token string">&quot;A_LIST[2]: ${LIST_STR}&quot;</span><span class="token punctuation">)</span> <span class="token comment"># cake</span>
</code></pre></div><p>å…¶ä»–æ“ä½œï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥è‹¥å¹²å…ƒç´ ã€å°†å…ƒç´ æ’å…¥ i=0 çš„ä½ç½®ã€åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ã€ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ã€ç§»é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€ç§»é™¤æŒ‡å®šå…ƒç´ ã€ç§»é™¤é‡å¤å…ƒç´ ã€ç¿»è½¬å…ƒç´ ã€å…ƒç´ æ’åºç­‰ç­‰</p> <h2 id="å®å®šä¹‰"><a href="#å®å®šä¹‰" class="header-anchor">#</a> å®å®šä¹‰</h2> <p>ä»£ç æ‰€åœ¨é¡¹ç›®ï¼š<code>05_micro_definition</code></p> <p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®å®å®šä¹‰åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæŸä¸€æ®µé€»è¾‘ï¼Œæ¯”å¦‚</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;process...\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//æœ‰å®å®šä¹‰æ—¶æ‰ä¼šæ‰§è¡Œä»£ç </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">DEBUG_MODE</span></span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;debugging...\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†è®©æµ‹è¯•æ›´çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åœ¨ä»£ç ä¸­å®šä¹‰å®ï¼Œè€Œæ˜¯åœ¨ gcc/g++ å‘½ä»¤ä¸­æŒ‡å®šï¼Œæ¯”å¦‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ gcc test.c <span class="token parameter variable">-DDEBUG_MODE</span> <span class="token parameter variable">-o</span> app
</code></pre></div><p>åœ¨ CMake ä¸­æˆ‘ä»¬ä¸ç›´æ¥é…ç½® gcc/g++ï¼Œè€Œæ˜¯åœ¨ <code>CMakeLists.txt</code> ä¸­è¿›è¡Œå®å®šä¹‰</p> <div class="language-py extra-class"><pre class="language-py"><code>add_definitions<span class="token punctuation">(</span><span class="token operator">-</span>DDEBUG_MODE<span class="token punctuation">)</span>
</code></pre></div><p>æµ‹è¯•ï¼š</p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>

project<span class="token punctuation">(</span>helloworld<span class="token punctuation">)</span>

<span class="token comment"># è¿›è¡Œå®å®šä¹‰</span>
add_definitions<span class="token punctuation">(</span><span class="token operator">-</span>DDEBUG_MODE<span class="token punctuation">)</span>

add_executable<span class="token punctuation">(</span>app main<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
</code></pre></div><h2 id="cmake-åµŒå¥—"><a href="#cmake-åµŒå¥—" class="header-anchor">#</a> CMake åµŒå¥—</h2> <p>å½“é¡¹ç›®åŠŸèƒ½æ¯”è¾ƒå¤æ‚æ—¶ï¼Œéœ€è¦è¿›è¡Œâ€œæ¨¡å—åŒ–â€æ‹†åˆ†ç®€åŒ–ï¼Œæ¯ä¸ªæ¨¡å—ä¸­åŒ…å«ä¸€ä¸ª <code>CMakeLists.txt</code></p> <p>æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªâ€œå¤æ‚â€çš„é¡¹ç›®</p> <div class="language-txt extra-class"><pre class="language-txt"><code>.
|-- calc                   &lt;--- è®¡ç®—å·¥å…·æ¨¡å—
|   |-- add.cpp
|   |-- CMakeLists.txt
|   |-- div.cpp
|   |-- mul.cpp
|   `-- sub.cpp
|-- CMakeLists.txt
|-- include                &lt;---- å£°æ˜æ¨¡å—
|   |-- calc.h
|   `-- sort.h
|-- sort                   &lt;---- æ’åºæ¨¡å—
|   |-- CMakeLists.txt
|   |-- insert_sort.cpp
|   `-- select_sort.cpp
|-- test_calc              &lt;---- æµ‹è¯•æ¨¡å—ï¼Œæµ‹è¯•è®¡ç®—å·¥å…·
|   |-- CMakeLists.txt
|   `-- test_calc.cpp
`-- test_sort              &lt;---- æµ‹è¯•æ¨¡å—ï¼Œæµ‹è¯•æ’åºå·¥å…·
    |-- CMakeLists.txt
    `-- test_sort.cpp
</code></pre></div><p><strong>å˜é‡å…±äº«</strong>ï¼šå­èŠ‚ç‚¹ä½¿ç”¨çˆ¶èŠ‚ç‚¹ä¸­å®šä¹‰çš„å˜é‡</p> <p>æŒ‡å®šçˆ¶å­å…³ç³»ï¼šä½¿ç”¨ <code>add_subdirectory</code> å‘½ä»¤</p> <h3 id="ç¼–å†™æ ¹-cmakelists-txt"><a href="#ç¼–å†™æ ¹-cmakelists-txt" class="header-anchor">#</a> ç¼–å†™æ ¹ CMakeLists.txt</h3> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>test<span class="token punctuation">)</span>

<span class="token comment"># å®šä¹‰å˜é‡</span>
<span class="token comment"># 1.å®šä¹‰é™æ€åº“ç”Ÿæˆè·¯å¾„</span>
SET<span class="token punctuation">(</span>SLIB_PATH $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token punctuation">)</span>
<span class="token comment"># 2.å®šä¹‰å¯æ‰§è¡Œç¨‹åºçš„å­˜å‚¨è·¯å¾„</span>
SET<span class="token punctuation">(</span>EXE_PATH $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span><span class="token builtin">bin</span><span class="token punctuation">)</span>
<span class="token comment"># 3.å®šä¹‰å¤´æ–‡ä»¶è·¯å¾„</span>
SET<span class="token punctuation">(</span>HEAD_PATH $<span class="token punctuation">{</span>PROJECT_SOURCE_DIR<span class="token punctuation">}</span><span class="token operator">/</span>include<span class="token punctuation">)</span>
<span class="token comment"># 4.å®šä¹‰åº“æ–‡ä»¶å</span>
SET<span class="token punctuation">(</span>LIB_CALC calc<span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>LIB_SORT sort<span class="token punctuation">)</span>
<span class="token comment"># 5.å®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å</span>
SET<span class="token punctuation">(</span>APP_TEST_CALC app_test_calc<span class="token punctuation">)</span>
SET<span class="token punctuation">(</span>APP_TEST_SORT app_test_sort<span class="token punctuation">)</span>

<span class="token comment"># æ·»åŠ å­ç›®å½•</span>
add_subdirectory<span class="token punctuation">(</span>calc<span class="token punctuation">)</span>
add_subdirectory<span class="token punctuation">(</span>sort<span class="token punctuation">)</span>
add_subdirectory<span class="token punctuation">(</span>test_calc<span class="token punctuation">)</span>
add_subdirectory<span class="token punctuation">(</span>test_sort<span class="token punctuation">)</span>
</code></pre></div><p>åœ¨æ­¤å®šä¹‰çš„å˜é‡å¯ä»¥åœ¨å­æ¨¡å—ä¸­ä½¿ç”¨</p> <h3 id="calc-å’Œ-sort-ä¸¤ä¸ªæ¨¡å—çš„-cmakelists-txt"><a href="#calc-å’Œ-sort-ä¸¤ä¸ªæ¨¡å—çš„-cmakelists-txt" class="header-anchor">#</a> calc å’Œ sort ä¸¤ä¸ªæ¨¡å—çš„ CMakeLists.txt</h3> <p><code>calc/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>calc<span class="token punctuation">)</span>

<span class="token comment"># æœç´¢æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šå¤´æ–‡ä»¶</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šåº“è¾“å‡ºç›®å½•</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># ç¼–è¯‘é™æ€åº“ã€‚æŒ‡å®šåº“å</span>
add_library<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_CALC<span class="token punctuation">}</span> STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>sort/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>sort<span class="token punctuation">)</span>

<span class="token comment"># æœç´¢æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šå¤´æ–‡ä»¶</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šåº“è¾“å‡ºç›®å½•</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># ç¼–è¯‘é™æ€åº“ã€‚æŒ‡å®šåº“å</span>
add_library<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span> STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="ä¸¤ä¸ªæµ‹è¯•ç›®å½•é‡Œçš„-cmakelists-txt"><a href="#ä¸¤ä¸ªæµ‹è¯•ç›®å½•é‡Œçš„-cmakelists-txt" class="header-anchor">#</a> ä¸¤ä¸ªæµ‹è¯•ç›®å½•é‡Œçš„ CMakeLists.txt</h3> <p><code>test_calc/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>test_calc<span class="token punctuation">)</span>

<span class="token comment"># æœç´¢æºæ–‡ä»¶</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># åŒ…å«å£°æ˜æ–‡ä»¶ç›®å½•</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥é™æ€åº“</span>
link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_CALC<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šåº“ç›®å½•</span>
link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># æŒ‡å®šç”Ÿæˆç¨‹åºå­˜å‚¨ä½ç½®</span>
SET<span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{</span>EXE_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># ç”Ÿæˆç¨‹åº</span>
add_executable<span class="token punctuation">(</span>$<span class="token punctuation">{</span>APP_TEST_CALC<span class="token punctuation">}</span> $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>test_sort/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>test_sort<span class="token punctuation">)</span>

<span class="token comment"># æœç´¢æºæ–‡ä»¶</span>
<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment"># åŒ…å«å£°æ˜æ–‡ä»¶ç›®å½•</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥é™æ€åº“</span>
link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># æŒ‡å®šåº“ç›®å½•</span>
link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># æŒ‡å®šç”Ÿæˆç¨‹åºå­˜å‚¨ä½ç½®</span>
SET<span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{</span>EXE_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># ç”Ÿæˆç¨‹åº</span>
add_executable<span class="token punctuation">(</span>$<span class="token punctuation">{</span>APP_TEST_SORT<span class="token punctuation">}</span> $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ‰§è¡Œæ„å»º"><a href="#æ‰§è¡Œæ„å»º" class="header-anchor">#</a> æ‰§è¡Œæ„å»º</h3> <p>åœ¨æ ¹ç›®å½•ä¸­åˆ›å»º build ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸­æ‰§è¡Œ <code>cmake ..</code>ï¼Œç„¶åæ‰§è¡Œ <code>make</code> å‘½ä»¤</p> <div class="language- extra-class"><pre class="language-text"><code>[engure@ali build]$ cmake .. &amp;&amp; make
-- The C compiler identification is GNU 8.5.0
-- The CXX compiler identification is GNU 8.5.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /home/engure/cmake_dabing/cmake-tutorials-dabing/06_modulization/build
[  8%] Building CXX object calc/CMakeFiles/calc.dir/add.cpp.o
[ 16%] Building CXX object calc/CMakeFiles/calc.dir/div.cpp.o
[ 25%] Building CXX object calc/CMakeFiles/calc.dir/mul.cpp.o
[ 33%] Building CXX object calc/CMakeFiles/calc.dir/sub.cpp.o
[ 41%] Linking CXX static library ../../lib/libcalc.a
[ 41%] Built target calc
[ 50%] Building CXX object sort/CMakeFiles/sort.dir/insert_sort.cpp.o
[ 58%] Building CXX object sort/CMakeFiles/sort.dir/select_sort.cpp.o
[ 66%] Linking CXX static library ../../lib/libsort.a
[ 66%] Built target sort
[ 75%] Building CXX object test_calc/CMakeFiles/app_test_calc.dir/test_calc.cpp.o
[ 83%] Linking CXX executable ../../bin/app_test_calc
[ 83%] Built target app_test_calc
[ 91%] Building CXX object test_sort/CMakeFiles/app_test_sort.dir/test_sort.cpp.o
[100%] Linking CXX executable ../../bin/app_test_sort
[100%] Built target app_test_sort
</code></pre></div><h3 id="åœ¨-sort-åº“ä¸­é“¾æ¥-calc-åº“"><a href="#åœ¨-sort-åº“ä¸­é“¾æ¥-calc-åº“" class="header-anchor">#</a> åœ¨ sort åº“ä¸­é“¾æ¥ calc åº“</h3> <p>åœ¨ sort é™æ€åº“ä¸­é“¾æ¥ calc é™æ€åº“ï¼Œåªéœ€è¦ä¿ç•™ <code>test_sort</code> ä¸€ä¸ªæµ‹è¯•æ¨¡å—å³å¯</p> <p>é¡¹ç›®ï¼š<code>07_modulization_lib_link</code></p> <p>1ã€æŒ‡å®š sort åº“é“¾æ¥ calc åº“ï¼Œ<code>sort/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>sort<span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥ calc åº“</span>
link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_CALC<span class="token punctuation">}</span><span class="token punctuation">)</span>

add_library<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span> STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2ã€åœ¨ sort åº“ä¸­ä½¿ç”¨ calc åº“ä¸­çš„çš„å‡½æ•°ï¼Œ<code>sort/insert_sort.cpp</code></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;sort.h&quot;</span></span>
<span class="token comment">//å¼•å…¥å£°æ˜</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;calc.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">insert_sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è°ƒç”¨ add æ–¹æ³•</span>
  <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;---\nc=%d\n---\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> key<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      key <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
          j <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> key<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3ã€ä¸€ç‚¹è¯´æ˜ <code>test_sort/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>test_sort<span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥ sort åº“ä»¥ä½¿ç”¨å…¶ä¸­çš„æ’åºå‡½æ•°</span>
<span class="token comment">#   å› ä¸º sort åº“é“¾æ¥äº† calc åº“ï¼ˆå¯ç†è§£ä¸º calc æ‰“åŒ…åˆ°äº† sort åº“ä¸­ï¼‰</span>
<span class="token comment">#   æ‰€ä»¥ç›¸å½“äºè¯¥æµ‹è¯•æ¨¡å—ä¹Ÿé“¾æ¥äº† calc åº“ï¼Œå¯ç›´æ¥ä½¿ç”¨ calc åº“</span>
link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span><span class="token punctuation">)</span>
link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

SET<span class="token punctuation">(</span>EXECUTABLE_OUTPUT_PATH $<span class="token punctuation">{</span>EXE_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
add_executable<span class="token punctuation">(</span>$<span class="token punctuation">{</span>APP_TEST_SORT<span class="token punctuation">}</span> $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>4ã€åœ¨ <code>test_sort</code> æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨ calc åº“ï¼Œ<code>test_sort/test_sort.cpp</code></p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;sort.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;calc.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> arr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  <span class="token function">insert_sort</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">select_sort</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span>  size<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ä½¿ç”¨ calc åº“ä¸­çš„å‡½æ•°</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;10 + 20 = %d\n&quot;</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>5ã€åœ¨ build ç›®å½•ä¸­æ„å»ºï¼Œæµ‹è¯•</p> <h3 id="åœ¨é™æ€åº“ä¸­é“¾æ¥åŠ¨æ€åº“"><a href="#åœ¨é™æ€åº“ä¸­é“¾æ¥åŠ¨æ€åº“" class="header-anchor">#</a> åœ¨é™æ€åº“ä¸­é“¾æ¥åŠ¨æ€åº“</h3> <p>æ‹·è´ä¸Šä¸€èŠ‚æœ€ç»ˆçš„é¡¹ç›®ä»£ç ï¼Œå‘½åä¸º <code>08_modulization_lib_link_2</code></p> <p>1ã€æŒ‡å®š calc é¡¹ç›®æœ€ç»ˆç”ŸæˆåŠ¨æ€åº“ <code>calc/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>calc<span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># å°† STATIC ä¿®æ”¹ä¸º SHARED</span>
add_library<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_CALC<span class="token punctuation">}</span> SHARED $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2ã€åœ¨ sort ä¸­é“¾æ¥ calc åŠ¨æ€åº“ <code>sort/CMakeLists.txt</code></p> <div class="language-py extra-class"><pre class="language-py"><code>cmake_minimum_required<span class="token punctuation">(</span>VERSION <span class="token number">3.15</span><span class="token punctuation">)</span>
project<span class="token punctuation">(</span>sort<span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">(</span>GLOB SRC_LIST <span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>HEAD_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token builtin">set</span><span class="token punctuation">(</span>LIBRARY_OUTPUT_PATH $<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

link_directories<span class="token punctuation">(</span>$<span class="token punctuation">{</span>SLIB_PATH<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># ç”Ÿæˆé™æ€åº“ sort</span>
add_library<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span> STATIC $<span class="token punctuation">{</span>SRC_LIST<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># é“¾æ¥åŠ¨æ€åº“ calc åˆ° sort é™æ€åº“</span>
target_link_libraries<span class="token punctuation">(</span>$<span class="token punctuation">{</span>LIB_SORT<span class="token punctuation">}</span> $<span class="token punctuation">{</span>LIB_CALC<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>3ã€æ„å»ºé¡¹ç›®</p> <blockquote><p>æ­¤æ—¶ calc åº“å¹¶æœªè¢«æ‰“åŒ…åˆ° sort åº“ä¸­ï¼Œè€Œæ˜¯ä¿å­˜äº†ç¬¦å·</p></blockquote> <h2 id="é¡¹ç›®"><a href="#é¡¹ç›®" class="header-anchor">#</a> é¡¹ç›®</h2> <p>å†…å®¹ï¼šä½¿ç”¨ cmake é‡æ–°æ„å»ºä¸€ä¸ª <a href="https://github.com/YY0628/ReactorHttp-cpp" target="_blank" rel="noopener noreferrer">ReactorHttp-Cppï¼ˆå¤§ä¸™è€å¸ˆå¦ä¸€ä¸ªæ•™ç¨‹ï¼‰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é¡¹ç›®</p> <p>æ­¥éª¤ï¼š</p> <ol><li>æŒ‰ç…§ä¸åŒåŠŸèƒ½å°†æ–‡ä»¶åˆ†ç»„ï¼Œç¼–å†™æ ¹ cmake é…ç½®æ–‡ä»¶å’Œå­é…ç½®æ–‡ä»¶</li> <li>å­æ¨¡å—æœ‰ commonã€httpã€reactorã€tcpã€threadï¼Œåœ¨æ„å»ºæ—¶éƒ½ä½œä¸ºé™æ€åº“å•ç‹¬æ„å»º</li> <li>â€¦</li></ol> <p>æ­¤ç« å¾ˆé‡è¦ï¼Œå€¼å¾—å¤šçœ‹ <a href="https://www.bilibili.com/video/BV14s4y1g7Zj?p=19" target="_blank" rel="noopener noreferrer">p19<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>checkpoint: <a href="https://gitee.com/egu0/cmake-tutorials-dabing/tree/56765f240ffb0daf38fe653beccee6915c9960c7/" target="_blank" rel="noopener noreferrer">cmake-tutorials-dabing: cmake è¯¾ç¨‹å¤§ä¸™è€å¸ˆ - Gitee.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/ops/assets/js/app.d9b500de.js" defer></script><script src="/ops/assets/js/2.592a6313.js" defer></script><script src="/ops/assets/js/1.47e12c88.js" defer></script><script src="/ops/assets/js/24.848e5af5.js" defer></script>
  </body>
</html>
